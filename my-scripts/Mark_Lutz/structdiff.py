json1 =    {
      "instrument_id":19296285,
      "master_information":{
         "instrument_master":{
            "apex_asset_type":7,
            "apex_asset_type_descr":{'key' : {'c':8, 'd':3, 'e':8} },
            "child_issue_ind":'false',
            "country_of_risk":"RU",
            "eval_quotation_basis":1,
            "eval_quotation_basis_descr":"Per Share",
            "federal_tax_status":3,
            "federal_tax_status_descr":"Taxable",
            "instrument_status":1,
            "instrument_status_descr":"Live",
            "instrument_type":4,
            "instrument_type_descr":"Equity",
            "primary_currency_code":"USD",
            "primary_exchange":"RUSX",
            "primary_market_code":"MISX",
            "primary_name":"RUB1(USD)",
            "accrued_interest":{
               "ex_div_date_ind":'false'
            }
         },
         "instrument_xref":{
            "bloomberg_symbology":[
               {
                  "bb_bsid":"",
                  "bb_ticker":"KRPE",
                  "bb_unique_id":"EQ0000000000321372",
                  "bbgid":"BBG000C6F229",
                  "bbgid_composite":"BBG000C6F1T2",
                  "exch_code":"RR",
                  "id_bb_global_share_class_level":"BBG001SF3L67",
                  "id_bb_sec_num":"KRPE",
                  "market_sector":"Equity",
                  "security_typ":"Common Stock",
                  "security_typ2":""
               },
               {
                  "bb_bsid":"",
                  "bb_ticker":"KRPE",
                  "bb_unique_id":"EQ0000000000321372",
                  "bbgid":"BBG000C6F1T2",
                  "bbgid_composite":"BBG000C6F1T2",
                  "exch_code":"RU",
                  "id_bb_global_share_class_level":"BBG001SF3L67",
                  "id_bb_sec_num":"KRPE",
                  "market_sector":"Equity",
                  "security_typ":"Common Stock",
                  "security_typ2":""
               }
            ],
            "isin":"RU000A0JNZD9"
         },
         "market_master":{
            "market":[
               {
                  "accrued_interest":{
                     "ex_div_date_ind":'false'
                  },
                  "country_of_quotation":"RU",
                  "currency_code":"USD",
                  "id":15810722,
                  "listing_trading_status":1,
                  "mic":"RUSX",
                  "never_priced_indicator":'false',
                  "primary_market_ind":'true',
                  "quotation_basis":"1",
                  "quotation_basis_descr":"Per Share",
                  "xref":{
                     "analystics_id_type_id":"21",
                     "cva_code_type_id":1,
                     "idii_type_id":6,
                     "quick_code_type_id":13,
                     "rts_ticker_type_id":19,
                     "sedol":"7217063",
                     "sedol_type_id":3,
                     "status":"Live",
                     "status_id":1,
                     "ticker":"KRPE",
                     "ticker_type_id":17
                  }
               }
            ]
         },
         "organization_master":{
            "country_of_risk":"RU",
            "org_country_code":"RU",
            "organization_id":22110067,
            "organization_status":6,
            "organization_status_descr":"Live",
            "organization_type":67,
            "organization_type_descr":"Corporation",
            "primary_name":"Krasny Perekop (Ya",
            "business_entity":{
               "issuer":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type":"Mailing Address",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792559",
                  "company_legal_form":"corporation",
                  "out_of_business_ind":'false',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               },
               "parent":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792558",
                  "out_of_business_ind":'true',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               },
               "ultimate_parent":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type":"Mailing Address",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792559",
                  "company_legal_form":"corporation",
                  "country_of_risk":"RU",
                  "out_of_business_ind":'false',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               }
            },
            "organization_xref":{
               "issuer_duns":"357843346",
               "parent_duns":"357843346",
               "ult_parent_duns":"357843346"
            }
         }
      },
      "global_information":{
         "country_information":{
            "instrument_country_information":{
               "country_code":"RU",
               "holiday_schedule":"RU"
            }
         },
         "organization_information":{
            "classifications":{
               "primary_naics_code":313210,
               "sic_code":2211
            }
         }
      },
      "debt":{
         "cmo_details":{
            "factor_parent_ind":0
         },
         "fixed_income":{
            "child_indicator":'false'
         }
      },
      "equity":{
         "equity_details":{
            "equity_type":1,
            "equity_type_descr":"Common/Ordinary Stock",
            "instrument_form":1,
            "instrument_form_descr":"Registered",
            "issued_capital_effective_date":"2001-09-21",
            "par_value":1.000000,
            "par_value_currency":"RUB",
            "ptm_levy_flag":78,
            "shares_beneficial_int_flag":'false',
            "shares_outstanding":422851,
            "shares_outstanding_effective_date":"2001-09-21",
            "total_shares_outstanding_effective_date":"2001-09-21",
            "voting_rights_code":4
         }
      }
   }

json2 =    {
      "instrument_id":19296285,
      "master_information":{
         "instrument_master":{
            "apex_asset_type":7,
            "apex_asset_type_descr":{ 'key' : {'c':8, 'b':5, 'd':3, 'e':7} },
            "child_issue_ind":'false',
            "country_of_risk":"RU",
            "eval_quotation_basis":1,
            "eval_quotation_basis_descr":"Per Share",
            "federal_tax_status":3,
            "federal_tax_status_descr":"Taxable",
            "instrument_status":1,
            "instrument_status_descr":"Live",
            "instrument_type":4,
            "instrument_type_descr":"Equity",
            "primary_currency_code":"USD",
            "primary_exchange":"RUSX",
            "primary_market_code":"MISX",
            "primary_name":"RUB1(USD)",
            "accrued_interest":{
               "ex_div_date_ind":'false'
            }
         },
         "instrument_xref":{
            "bloomberg_symbology":[
               {
                  "bb_bsid":"",
                  "bb_ticker":"KRPE",
                  "bb_unique_id":"EQ0000000000321372",
                  "bbgid":"BBG000C6F229",
                  "bbgid_composite":"BBG000C6F1T2",
                  "exch_code":"RR",
                  "id_bb_global_share_class_level":"BBG001SF3L67",
                  "id_bb_sec_num":"KRPE",
                  "market_sector":"Equity",
                  "security_typ":"Common Stock",
                  "security_typ2":""
               },
               {
                  "bb_bsid":"",
                  "bb_ticker":"KRPE",
                  "bb_unique_id":"EQ0000000000321372",
                  "bbgid":"BBG000C6F1T2",
                  "bbgid_composite":"BBG000C6F1T2",
                  "exch_code":"RU",
                  "id_bb_global_share_class_level":"BBG001SF3L67",
                  "id_bb_sec_num":"KRPE",
                  "market_sector":"Equity",
                  "security_typ":"Common Stock",
                  "security_typ2":""
               }
            ],
            "isin":"RU000A0JNZD9"
         },
         "market_master":{
            "market":[
               {
                  "accrued_interest":{
                     "ex_div_date_ind":'false'
                  },
                  "country_of_quotation":"RU",
                  "currency_code":"USD",
                  "id":15810722,
                  "listing_trading_status":1,
                  "mic":"RUSX",
                  "never_priced_indicator":'false',
                  "primary_market_ind":'true',
                  "quotation_basis":"1",
                  "quotation_basis_descr":"Per Share",
                  "xref":{
                     "analystics_id_type_id":"21",
                     "cva_code_type_id":1,
                     "idii_type_id":6,
                     "quick_code_type_id":13,
                     "rts_ticker_type_id":19,
                     "sedol":"7217063",
                     "sedol_type_id":3,
                     "status":"Live",
                     "status_id":1,
                     "ticker":"KRPE",
                     "ticker_type_id":17
                  }
               }
            ]
         },
         "organization_master":{
            "country_of_risk":"RU",
            "org_country_code":"RU",
            "organization_id":22110067,
            "organization_status":6,
            "organization_status_descr":"Live",
            "organization_type":67,
            "organization_type_descr":"Corporation",
            "primary_name":"Krasny Perekop (Ya",
            "business_entity":{
               "issuer":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type":"Mailing Address",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792559",
                  "company_legal_form":"corporation",
                  "out_of_business_ind":'false',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               },
               "parent":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792558",
                  "out_of_business_ind":'true',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               },
               "ultimate_parent":{
                  "address":[
                     {
                        "address1":"63 Ul Stachek",
                        "type":"Mailing Address",
                        "type_id":2
                     },
                     {
                        "address1":"63 Ul Stachek",
                        "city":"Yaroslavl",
                        "country":"RU",
                        "postal_code":"150002",
                        "type":"Physical Address",
                        "type_id":4
                     }
                  ],
                  "bankruptcy_open_ind":'false',
                  "business_registration_num":"1027600792559",
                  "company_legal_form":"corporation",
                  "country_of_risk":"RU",
                  "out_of_business_ind":'false',
                  "phone":"4852270836",
                  "prev_registered_name":"Joint-Stock Company \"Yaroslavsk Combine of Technical Tissue\" Red Perekop \"",
                  "publicly_traded_ind":'false',
                  "registered_name":"Krasny Perekop, AO",
                  "trade_style":"Oao \"Krasny Perekop\""
               }
            },
            "organization_xref":{
               "issuer_duns":"357843346",
               "parent_duns":"357843346",
               "ult_parent_duns":"357843346"
            }
         }
      },
      "global_information":{
         "country_information":{
            "instrument_country_information":{
               "country_code":"RU",
               "holiday_schedule":"RU"
            }
         },
         "organization_information":{
            "classifications":{
               "primary_naics_code":313210,
               "sic_code":2211
            }
         }
      },
      "debt":{
         "cmo_details":{
            "factor_parent_ind":0
         },
         "fixed_income":{
            "child_indicator":'false'
         }
      },
      "equity":{
         "equity_details":{
            "equity_type":1,
            "equity_type_descr":"Common/Ordinary Stock",
            "instrument_form":1,
            "instrument_form_descr":"Registered",
            "issued_capital_effective_date":"2001-09-21",
            "par_value":1.000000,
            "par_value_currency":"RUB",
            "ptm_levy_flag":78,
            "shares_beneficial_int_flag":'false',
            "shares_outstanding":422851,
            "shares_outstanding_effective_date":"2001-09-21",
            "total_shares_outstanding_effective_date":"2001-09-21",
            "voting_rights_code":4
         }
      }
   }
import ast

class StructDiff:


    def __init__(self,source,target):
        self.source = source
        self.target = target

    @staticmethod
    def get_paths(struct):
        paths = []
        if isinstance(struct, dict):  # found a dict-like structure...
            for k, v in struct.items():  # iterate over it
                paths.append([k])  # add the current child path
                paths += [[k] + x for x in StructDiff.get_paths(v)]  # get sub-paths, extend with the current

        # else, check if a list-like structure, remove if you don't want list paths included
        elif isinstance(struct, list) and not isinstance(struct, str):
            for i, v in enumerate(struct):
                paths.append([i])
                paths += [[i] + x for x in StructDiff.get_paths(v)]  # get sub-paths, extend with the current
        return paths
    
    @staticmethod
    def get_struct(struct_file):
        with open(struct_file) as f:
            return ast.literal_eval(f.read())

    @classmethod
    def from_file(cls,source_file,target_file):
        return cls(cls.get_struct(source_file),cls.get_struct(target_file))        

    ##Getting value of any path(in form of list) from any structure type
    @staticmethod
    def deref_multi(data, keys):
        return StructDiff.deref_multi(data[keys[0]], keys[1:]) if keys else data

    def compare(self):
        ##getting all desired paths of any given structure
        source_paths,target_paths = self.__class__.get_paths(self.source),self.__class__.get_paths(self.target)

        matched = None
        num = 0

        ##Looping over structure
        while num < len(source_paths):

            ##Indentying missing path
            if source_paths[num] not in target_paths:
                print("MISSING JPATH IN TARGET,{}".format('.'.join(str(v) for v in source_paths[num])))
                num = num + 1
                continue

            ##If parent path matched, then not matching child paths - saving memory/time
            if source_paths[num][0] == matched:
                num=num+1
                continue

            ##If parent path
            if len(source_paths[num]) == 1:
                source,target = self.source[source_paths[num][0]], self.target[source_paths[num][0]]
                if(source == target): ##if values in both structure matches
                    matched = source_paths[num][0]
                
                ##if parent not matches, last parent node(single by dfault) or checking if its single parent  
                elif num == len(source_paths)-1 or source_paths[num][0] != source_paths[num+1][0]:
                #elif isinstance(source,(int,str)) or isinstance(target,(int,str)):
                    print('MISMATCH,{},{},{}'.format('.'.join(source_paths[num]),source,target))
            else:
                current_jpath = '.'.join(str(v) for v in source_paths[num])
                next_jpath = '.'.join(str(v) for v in source_paths[num+1][:-1]) if num < len(source_paths)-1 else None

                if current_jpath != next_jpath:
                    source,target = StructDiff.deref_multi(self.source,source_paths[num]),StructDiff.deref_multi(self.target,source_paths[num])
                    if source != target:
                        print('MISMATCH,{},{},{}'.format(current_jpath,source,target))

            num = num + 1

        for path in target_paths:
            if path not in source_paths:
                print("MISSING JPATH IN SOURCE,{}".format('.'.join(str(v) for v in path)))

if __name__ == '__main__':
    cmp_obj = StructDiff(json1,json2)
    #cmp_obj = StructDiff.from_file('json1.pkl','json2.pkl')
    #print(cmp_obj)
    cmp_obj.compare()

'''
['global_information']
['global_information', 'organization_information']
['global_information', 'organization_information', 'classifications']
['global_information', 'organization_information', 'classifications', 'primary_naics_code']
['global_information', 'organization_information', 'classifications', 'sic_code']
['global_information', 'country_information']
['global_information', 'country_information', 'instrument_country_information']
['global_information', 'country_information', 'instrument_country_information', 'country_code']
['global_information', 'country_information', 'instrument_country_information', 'holiday_schedule']
['master_information']
['master_information', 'instrument_master']
['master_information', 'instrument_master', 'apex_asset_type_descr']
['master_information', 'instrument_master', 'federal_tax_status_descr']
['master_information', 'instrument_master', 'primary_exchange']
['master_information', 'instrument_master', 'primary_currency_code']
['master_information', 'instrument_master', 'accrued_interest']
['master_information', 'instrument_master', 'accrued_interest', 'ex_div_date_ind']
['master_information', 'instrument_master', 'instrument_type_descr']
['instrument_id']
'''
